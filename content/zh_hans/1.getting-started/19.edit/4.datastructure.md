---
title: 自定义数据结构
description: 自定义数据结构一般配合自定义属性使用，有些属性并非单一的类型，比如玩家的背包
---

自定义数据结构一般配合自定义属性使用，有些属性并非单一的类型，比如玩家的背包，

记录着玩家拥有的道具信息、数目和装备等信息，而非单指某个数值，这种复合的情况则可以使用自定义数据结构制作。

## 打开自定义数据结构编辑器

菜单 -> 自定义编辑器 -> 常规 -> 自定义编辑器 -> 数据结构编辑（ALT+0）

或在选择自定义数据结构时可进行编辑。

## 创建自定义数据结构

定义数据结构统一采用编号进行管理。

通过更改最大值调整可用的数据结构范围。

![alt text](https://assbak.gcw.wiki/gcw/image/zh_hans/getting-started/19.edit/4.datastructure/image.png)

|      |                                |
| ---- | ------------------------------ |
| `#1` | 搜索数据                       |
| `#2` | 数据列表                       |
| `#3` | 修改最大值，以便新增或删减数据 |
| `#4` | 修改数据名称                   |

| 操作       | 说明                                                                                            | 操作方式                                          |
| ---------- | ----------------------------------------------------------------------------------------------- | ------------------------------------------------- |
| 选中       | 选中一个模块进行编辑                                                                            | 鼠标左键点击指定的模块                            |
| 复制       | 复制一个模块数据                                                                                | `键盘操作` CTRL+C<br>`鼠标操作` 鼠标右键选择复制  |
| 粘贴       | 将此前复制的模块数据粘贴到当前指定的数据位置上                                                  | `键盘操作` CTRL+V<br>`鼠标操作` 鼠标右键选择粘贴  |
| 清空       | 清空当前选择的数据，由于GameCreator数据由编号统一管理，<br>数据只能清空和更改最大值，无法删除。 | `键盘操作` CTRL+D <br>`鼠标操作` 鼠标右键选择清空 |
| 重命名分类 | 可以给分类进行命名                                                                              | `鼠标操作` 鼠标右键点击分类弹出菜单，选择重命名   |

## 编辑界面

自定义编辑器中的可视化制作编辑器界面的方法都是相同的，参考[【自定义编辑面板】](./editui)。

## 可视化填入数据

在编辑器调用到该数据结构的组件中，点击后会弹出相应的面板，填入数据即可。

## 专有的变量属性：快捷操作

在外部直接显示和操作，无需在弹出的数据结构窗口内操作，根据变量名顺序决定排列。

![alt text](https://assbak.gcw.wiki/gcw/image/zh_hans/getting-started/19.edit/4.datastructure/image-1.png)

## 变量名

用于决定自动生成API时候的名称

![alt text](https://assbak.gcw.wiki/gcw/image/zh_hans/getting-started/19.edit/4.datastructure/image-2.png)

## 系统自动生成API

系统会根据当前所有的自定义模块自动生成一个 DataStructureRuntime.api 文件，

只在当前的内存中使用，并不是实际的硬盘文件，使用第三方IDE的话是没有该API的。

通过使用`DataStructure_数据结构变量名`来访问对应的数据结构类，系统会根据预设的变量和其类型、默认值等自动生成该类定义。

```ts [DataStructureRuntime.ts]
/**
 * #1 preloadAsset
 */
class DataStructure_preloadAsset {
    assetType: number; // = 0; 资源类型
    asset0: string; // = ""; 图片
    asset1: string; // = ""; 音频
    asset2: number; // = 1; 行走图
    asset3: number; // = 1; 立绘
    asset4: number; // = 1; 动画
    asset5: number; // = 1; 界面
    asset6: number; // = 1; 对话框
}
```

## 创建一个数据结构数据

预设好的数据结构可以视为一个普通的Object类型，并且支持可视化面板编辑它。

创建可直接使用new方法：var a = new DataStructure_数据结构变量名。
